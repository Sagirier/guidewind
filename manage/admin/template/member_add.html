<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <title>导风系统网站后台 - 会员管理</title>
    <meta name="keywords" content="导风系统,网站后台">
    <meta name="description" content="导风系统网站后台">
    <link href="manage/admin/template/css/bootstrap.min.css?v=3.4.0" rel="stylesheet">
    <link href="manage/admin/template/font-awesome/css/font-awesome.css?v=4.3.0" rel="stylesheet">
    <link href="manage/admin/template/css/animate.css" rel="stylesheet">
    <link href="manage/admin/template/css/style.css?v=2.2.0" rel="stylesheet">
    <link href="manage/admin/template/css/plugins/iCheck/custom.css" rel="stylesheet">
	<link href="manage/admin/template/css/plugins/chosen/chosen.css" rel="stylesheet">
	<style type="text/css">
	#maillabel{width: 100%; position: relative;}
	#mailBox{background:#fff;border:1px solid #ddd;padding:3px 5px 5px;position:absolute;z-index:9999;display:none;-webkit-box-shadow:0px 2px 7px rgba(0, 0, 0, 0.35);-moz-box-shadow:0px 2px 7px rgba(0, 0, 0, 0.35);  width: 100%;}
	#mailBox p{width:100%;margin:0;padding:0;height:20px;line-height:20px;clear:both;font-size:12px;color:#ccc;cursor:default;}
	#mailBox ul{padding:0;margin:0; float: left; width: 100%;}
	#mailBox li{font-size:12px;height:22px;line-height:22px;color:#939393;font-family:'Tahoma';list-style:none;cursor:pointer;overflow:hidden; width: 100%;}
	#mailBox .cmail{color:#000;background:#e8f4fc;}
	.chosen-search{display: none;}
	</style>
</head>
<body>
    <div id="wrapper">
        <?php include "manage/admin/template/left.html"; ?>
       	<div id="page-wrapper" class="gray-bg dashbard-1">
      	<?php include "manage/admin/template/header.html"; ?>
            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-10">
                    <h2>会员个人资料</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="?">主页</a>
                        </li>
                        <li><a href="?action=member">会员管理</a></li>
                        </li>
                        <li>
                            <strong><font color="#1AB394">添加会员</font></strong>
                        </li>
                    </ol>
                </div>
                <div class="col-lg-2">

                </div>
            </div>
            <div class="wrapper wrapper-content animated">
				<div class="row">
				    <div class="col-lg-6 full-width">
				    	<div class="ibox-title">
                            <h5>添加会员</h5>
                            <div class="ibox-tools">
                            	<a href="?action=member" class="btn btn-primary btn-xs"><i class="fa fa-mail-reply"></i> 返回会员列表</a>
                        	</div>
                        </div>
                        <div class="ibox-content">
				            <form action="?action=member&o=add&go=1" method="post" onsubmit="return false;" id="memberaddform">
				            <div class="panel blank-panel">
	                        	<div class="panel-heading">
			                        <div class="panel-options">
			                            <ul class="nav nav-tabs">
			                                <li class="active"><a data-toggle="tab" href="#base">基本信息</a>
			                                </li>
			                                <li class=""><a data-toggle="tab" href="#expand">联系信息</a>
			                                </li>
			                                <li class=""><a data-toggle="tab" href="#account">账户信息</a>
			                                </li>
			                            </ul>
			                        </div>
			                    </div>
	                        	<div class="panel-body">
			                		<div class="tab-content">
			                    		<div id="base" class="tab-pane active">
			                        		<table class="table table-bordered">
			                        		<thead>
		                                    	<tr>
		                                        	<td style="background: #efefef;width:260px;">设置项目</td>
		                                        	<td style="background: #efefef;width:360px;">设置详情/选项</span></td>
		                                        	<td style="background: #efefef;">备注/说明</td>
		                                    	</tr>
		                            		</thead>
			                        		<tbody>
			                        		<tr>
			                            		<td>会员头像：</td>
			                            		<td>
			                            			<input type="hidden" value="" id="memberid" name="member_portrait" />
		                            				<img id="imageid" style="height: 200px; width: 200px;" class="img-responsive box-s-10 border-r-30" src="manage/admin/template/img/noportrait.png">
		                            				<button type="button" class="btn btn-primary btn-xs m-l-md" style="vertical-align: bottom;" name="<?php echo $member_typename; ?>" id="inputid" value="<?php echo $member_type; ?>" onclick="Layerupload(this)">上传头像</button>
			                            		</td>
			                            		<td>请上传会员头像，若不上传，则为系统默认头像，默认头像地址为：manage/admin/template/img/noportrait.png</td>
			                            	</tr>
			                            	<tr>
			                                	<td><font color="#F00"><i class="fa fa-asterisk"></i></font> 用户名：</td>
			                                	<td>
			                                		<label style="width: 100%;">
			                                			<input class="form-control" name="member_username" id="member_username" type="text" />
			                                		</label>
			                                	</td>
			                                	<td>用户名为必填项，用于用户登陆，请输入，可以包括英文、数字，不能包含汉字和特殊字符（包括空格 ），长度不能超过30个字符。</td>
			                                </tr>
			                            	<tr>
			                                	<td><font color="#F00"><i class="fa fa-asterisk"></i></font> 用户密码：</td>
			                                	<td>
			                                		<label style="width: 100%;">
			                                			<input class="form-control" name="member_password" id="member_password" type="text" />
			                                		</label>
			                                	</td>
			                                	<td>密码为必填项，用于用户登陆，请输入，只能包含英文、和数字。</td>
			                                </tr>
			                            	<tr>
			                                	<td>用户昵称：</td>
			                                	<td>
			                                		<label style="width: 100%;">
			                                			<input class="form-control" name="member_nickname" type="text" />
			                                		</label>
			                                	</td>
			                                	<td>用户昵称，显示于用户详情页的名称，可以为汉字、英文、数字和特殊字符。</td>
			                                </tr>
			                                <tr>
			                            		<td>会员分组：</td>
			                            		<td>
			                            			<label style="width: 100%;">
			                            				<select class="chosen-select" name="member_group">
			                            					<?php foreach($group as $n){ ?>
													        <option hassubinfo="true" value="<?php echo $n['gid']; ?>"><?php echo $n['name']; ?></option>
													        <?php } ?>
			                            				</select>	
			                            			</label>
			                            		</td>
			                            		<td>用户分组，请选择。</td>
			                            	</tr>
			                            	<tr>
			                                	<td>真实姓名：</td>
			                                	<td>
			                                		<label style="width: 100%;">
			                                			<input value="<?php echo $contactinfo['realname']; ?>" class="form-control" name="member_realname" type="text" />
			                                		</label>
			                                	</td>
			                                	<td>用户真实姓名，为了保护隐私，该项可以不填。</td>
			                                </tr>
			                                <tr>
			                                	<td>性别：</td>
			                                	<td>
			                                		<label style="width: 100%;">
			                                			<select class="chosen-select" name="member_sexuality">
									        				<option hassubinfo="true" value="1">男</option>
									        				<option hassubinfo="true" value="2">女</option>
														</select>
													</label>
			                                	</td>
			                                	<td>用户性别，请选择。</td>
			                                </tr>
			                               	<tr>
			                            		<td>出生日期：</td>
			                                	<td>
			                                	<label style="width: 33%;padding-right: 1%;">
													<select name="member_birthyear" class="chosen-select" id="selYear"></select> 
			                                	</label>
			                                	<label style="width: 33%;padding-right: 1%;">
			                                		<select name="member_birthmonth" class="chosen-select" id="selMonth"></select>
			                                	</label>
			                            		<label style="width: 33%;">
			                                		<select name="member_birthday" class="chosen-select" id="selDay"></select>
			                            		</label>
			                            		</td>
			                            		<td>用户出生日期，请选择。</td>
			                                </tr>
			                                <tr>
			                            		<td>公司：</td>
			                            		<td>
			                            			<label style="width: 100%;">
			                            				<input type="text" class="form-control" value="<?php echo $contactinfo['company']; ?>" name="member_company" />
			                            			</label>
			                            		</td>
			                            		<td>用户所属公司，请输入。</td>
			                                </tr>
			                                <?php foreach($field_input as $name=>$fields_info){ if($fields_info['group']==1){ ?>
			                                <tr>
			                            		<td><font color="#18A689"><i class="fa fa-star-o"></i></font> <?php echo $name; ?>：</td>
			                            		<td>
			                            			<label style="width: 100%;">
			                            				<?php echo $fields_info['input']; ?>
			                            			</label>
			                            		</td>
			                            		<td>请选择/输入<font color="#18A689"><?php echo $name; ?></font>信息。</td>
			                                </tr>
			                                <?php }} ?>
			                                <tr>
			                            		<td>个人介绍：</td>
			                            		<td colspan="2">
			                            			<label style="position: relative;width: 100%;">
			                            				<textarea class="form-control" name="member_introduction" placeholder="请输入内容"></textarea>
			                            			</label>
			                            		</td>
			                                </tr>
			                                </tbody>
			                                </table>
	                        			</div>
	                        			<div id="expand" class="tab-pane">
	                        				<table class="table table-bordered">
	                        				<thead>
		                                    	<tr>
		                                        	<td style="background: #efefef;width:260px;">设置项目</td>
		                                        	<td style="background: #efefef;width:360px;">设置详情/选项</span></td>
		                                        	<td style="background: #efefef;">备注/说明</td>
		                                    	</tr>
		                            		</thead>
			                        		<tbody>
			                        		<tr>
			                                	<td>个人邮箱：</td>
			                                	<td>
			                                		<label id="maillabel">
			                                			<input id="email" name="member_email" class="form-control" type="text" />
			                                		</label>
			                                	</td>
			                                	<td>用户联系邮箱，请输入。</td>
			                                </tr>
			                                <tr>
			                                	<td>手机号：</td>
			                                	<td>
			                                		<label style="position: relative;width: 100%;">
			                                			<input id="phone" value="<?php echo $contactinfo['mobile']; ?>" name="member_mobile" class="form-control" type="text" />
			                                		</label>
			                                	</td>
			                                	<td>用户手机号码，请输入。</td>
			                                </tr>
			                                <tr>
			                                	<td>联系电话：</td>
			                                	<td>
			                                		<label style="position: relative;width: 100%;">
			                                			<input id="telephone" value="<?php echo $contactinfo['telephone']; ?>" name="member_telephone" class="form-control" type="text" />
			                                		</label>
			                                	</td>
			                                	<td>用户联系电话，请输入。</td>
			                                </tr>
			                                <tr>
			                            		<td>联系地址：</td>
			                                	<td>
			                                	<label style="width: 33%;padding-right: 1%;">
			                                		<select name="member_resideprovince" class="ex-select" id="province">
			                                			<?php foreach($province as $p){ ?>
			                                			<option hassubinfo="true" value="<?php echo $p['id']; ?>'" onclick="changeprovince(this);"><?php echo $p['name']; ?></option>
			                                			<?php } ?>
			                                		</select>
			                                	</label>
			                                	<label style="width: 33%;padding-right: 1%;" id="cityinfo">
			                                		<select name="member_residecity" class="ex-select">
			                                			<?php foreach($city_beijing as $c){ ?>
			                                			<option hassubinfo="true" value="<?php echo $c['id']; ?>'" onclick="changecity(this);"><?php echo $c['name']; ?></option>
			                                			<?php } ?>
			                                		</select>
			                                	</label>
			                            		<label style="width: 33%;" id="distinfo">
			                                		<select name="member_residedist" class="ex-select">
			                                			<?php foreach($dist_dongcheng as $d){ ?>
			                                			<option hassubinfo="true" value="<?php echo $d['id']; ?>'"><?php echo $d['name']; ?></option>
			                                			<?php } ?>
			                                		</select>
			                            		</label>
			                            		<br/>
			                            		<label style="width:100%; margin-top: 5px;">
			                            			<textarea style="width:100%;height: 30px; line-height: 30px;padding:0 12px;" class="form-control" name="member_address" placeholder="请输入详细地址"></textarea>
			                            		</label>
			                                	</td>
			                                	<td>联系地址，请选择，乡/街道以下地级请手动输入。</td>
			                               	</tr>
			                               	<tr>
			                                	<td>邮政编码：</td>
			                                	<td>
			                                		<label style="position: relative;width: 100%;">
			                                			<input id="zipcode" name="member_zipcode" class="form-control" type="text" />
			                                		</label>
			                                	</td>
			                                	<td>用户邮编，请输入。</td>
			                                </tr>
			                                <?php foreach($field_input as $name=>$fields_info){ if($fields_info['group']==2){ ?>
			                                <tr>
			                            		<td><font color="#18A689"><i class="fa fa-star-o"></i></font> <?php echo $name; ?>：</td>
			                            		<td>
			                            			<label style="width: 100%;">
			                            				<?php echo $fields_info['input']; ?>
			                            			</label>
			                            		</td>
			                            		<td>请选择/输入<font color="#18A689"><?php echo $name; ?></font>信息。</td>
			                                </tr>
			                                <?php }} ?>
			                                </tbody>
			                                </table>
	                        			</div>
	                        			<div id="account" class="tab-pane">
	                        				<table class="table table-bordered">
	                        				<thead>
		                                    	<tr>
		                                        	<td style="background: #efefef;width:260px;">设置项目</td>
		                                        	<td style="background: #efefef;width:360px;">设置详情/选项</span></td>
		                                        	<td style="background: #efefef;">备注/说明</td>
		                                    	</tr>
		                            		</thead>
			                        		<tbody>
			                        		<tr>
			                                	<td>账户余额：</td>
			                                	<td>
			                                		<label style="position: relative;width: 80%;">
			                                			<input id="money" name="member_money" value="0.00" class="form-control" type="text" />
			                                		</label>
			                                		<span style="padding-left: 20px;">元</span>
			                                	</td>
			                                	<td>用户账户金额，可以给用户设置初始金钱，金钱用于购买商品。</td>
			                                </tr>
			                                <tr>
			                                	<td>累计积分：</td>
			                                	<td>
			                                		<label style="position: relative;width: 80%;">
			                                			<input id="credit" name="member_credit" value="0" class="form-control" type="text" />
			                                		</label>
			                                		<span style="padding-left: 20px;">分</span>
			                                	</td>
			                                	<td>用户账户金额，可以给用户设置初始积分，积分用于兑换商品/享受金额抵消优惠。</td>
			                                </tr>
			                                <?php foreach($field_input as $name=>$fields_info){ if($fields_info['group']==3){ ?>
			                                <tr>
			                            		<td><font color="#18A689"><i class="fa fa-star-o"></i></font> <?php echo $name; ?>：</td>
			                            		<td>
			                            			<label style="width: 100%;">
			                            				<?php echo $fields_info['input']; ?>
			                            			</label>
			                            		</td>
			                            		<td>请选择/输入<font color="#18A689"><?php echo $name; ?></font>信息。</td>
			                                </tr>
			                                <?php }} ?>
			                                </tbody>
			                                </table>
	                        			</div>
	                        			<div class="hints m-b-md">
	                        				<span>带"<font color="#F00"><i class="fa fa-asterisk"></i></font>"的为必填项；带"<font color="#18A689"><i class="fa fa-star-o"></i></font>"的为自定义字段。</span>
	                        			</div>
	                        			<div class="clear">
                            				<button type="button" class="btn btn-primary" style="width: 260px;"  onclick="LayerconfirmAdd()">提交</button>
                       	 				</div>
	                        		</div>
	                        	</div>
	                        </div>
	                        </form>	
	                    </div>
                    </div>
                </div>
            </div><!--.wrapper-->
          <?php include "manage/admin/template/footer.html"; ?>
    </div><!--#page-wrapper-->
</div><!--#wrapper-->
<?php include "manage/admin/template/js.html"; ?>
	    <!-- Peity -->
    <script src="manage/admin/template/js/plugins/peity/jquery.peity.min.js"></script>
    <script src="manage/admin/template/js/demo/peity-demo.js"></script>
	<script type="text/javascript" src="manage/admin/template/js/autoMail.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			$('#email').autoMail({
				emails:['qq.com','163.com','126.com','sina.com','sohu.com','yahoo.cn','gmail.com','hotmail.com','live.cn']
			});
		});
	</script>
	<script type="text/javascript" src="manage/admin/template/js/date-select.js"></script>
	<script type="text/javascript"> 
		var selYear = window.document.getElementById("selYear"); 
		var selMonth = window.document.getElementById("selMonth"); 
		var selDay = window.document.getElementById("selDay"); 
		// 新建一个DateSelector类的实例，将三个select对象传进去 
		new DateSelector(selYear, selMonth, selDay, '年', '月', '日'); 
	</script> 
	<script type="text/javascript">
		function changeprovince(id){
			var cid=id.value;
			$.ajax({
				type:"post",
				url:"?action=district&o=get_city",
				async:true,
				data:"upid="+cid,
				success: function(html){
					$("#cityinfo").empty();
					$("#cityinfo").append(html);
				}
			});
		}
		function changecity(id){
			var did=id.value;
			$.ajax({
				type:"post",
				url:"?action=district&o=get_dist",
				async:true,
				data:"upid="+did,
				success: function(html){
					$("#distinfo").empty();
					$("#distinfo").append(html);
				}
			});
		}
	</script>
	 <!-- i-checks -->
    <script src="manage/admin/template/js/plugins/iCheck/icheck.min.js"></script>
    <script type="text/javascript">
    	//i-checks
    	$('.i-checks').iCheck({
            checkboxClass: 'icheckbox_square-green',
            radioClass: 'iradio_square-green',
        });
    </script>
	<script src="manage/admin/template/js/plugins/chosen/chosen.jquery.js"></script>
    <script>
        $(document).ready(function () {
            var elem = document.querySelector('.js-switch');
            var switchery = new Switchery(elem, {
                color: '#1AB394'
            });

            var elem_2 = document.querySelector('.js-switch_2');
            var switchery_2 = new Switchery(elem_2, {
                color: '#ED5565'
            });

            var elem_3 = document.querySelector('.js-switch_3');
            var switchery_3 = new Switchery(elem_3, {
                color: '#1AB394'
            });

        });
        var config = {
            '.chosen-select': {},
            '.chosen-select-deselect': {
                allow_single_deselect: true
            },
            '.chosen-select-no-single': {
                disable_search_threshold: 10
            },
            '.chosen-select-no-results': {
                no_results_text: 'Oops, nothing found!'
            },
            '.chosen-select-width': {
                width: "100%"
            }
        }
        for (var selector in config) {
            $(selector).chosen(config[selector]);
        }
    </script>
    <script src="manage/admin/template/js/plugins/layer/layer.min.js" type="text/javascript"></script>
    <script src="system/js/wpfrom.js" type="text/javascript"></script>
    <script type="text/javascript">
    	function LayerconfirmAdd(){
    		$.layer({
                area: ['auto','auto'],
                title: '系统提示',
                closeBtn: false,
                dialog: {
                    msg: '确定要添加该会员？',
                    btns: 2,                    
                    type: 4,
                    btn: ['确定','取消'],
                    yes: function(){
                    	var username=document.getElementById("member_username").value;
                    	var pass=document.getElementById("member_password").value;
                    	if(!from_null(username)){
                    		layer.msg('用户名不能为空'); return false;
                    	}         
                    	if(!from_max(username,30)){
                    		layer.msg('用户名不能超过30个字符'); return false;
                    	}
                    	if(!from_chinese(username) || !from_string(username)){
                    		layer.msg('用户名不能包含中文或特殊字符'); return false;
                    	}
                    	if(!from_null(pass)){
                    		layer.msg('密码不能为空'); return false;
                    	}
                    	if(!from_chinese(pass) || !from_string(pass)){
                    		layer.msg('密码只能包含英文和数字'); return false;
                    	}
                    	document.getElementById("memberaddform").submit();
                    }, no: function(){
                        return false;
                    }
                }
            });
		}
    	function Layerupload(id){
    		var filetype=id.value;
    		var fileName=id.name;
    		$.layer({
			    type: 2,
			    shadeClose: true,
			    title: false,
			    closeBtn: [1, true],
			    offset: ['',''],
			    area: ['940px','620px'],
			    iframe: {src: '?action=avator&o=loadup&inputid=memberid&imgid=imageid&filesdir=member'}
			});
    	}
    </script>
</body>

</html>
